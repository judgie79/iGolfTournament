@model Golf.Tournament.Models.HoleCollection
@{
    string teeName = "";
    if (ViewBag.teeName != null)
    {
        teeName = ViewBag.teeName;
        teeName = teeName.Replace(" ", "_");
    }

    int teeIndex = 0;
    if (ViewBag.teeIndex != null)
    {
        teeIndex = ViewBag.teeIndex;
    }
}


<a href="#" id="btnAddHole_@(teeName)" class="btn btn-sm btn-default">Add Hole</a>
<div class="control-group table-responsive container">

   

    <table id="scoreSheetEditorTable_@teeName" class="table table-bordered">
        @{
            var labelModel = new Golf.Tournament.Models.Hole();

            var colCount = Model.Count();
        }
        <colgroup id="scoreSheetEditorTableCoumns_@teeName">
            <col width="130">
            @for (int i = 0; i < colCount; i++)
            {
                <col width="60" />
            }
        </colgroup>
        
        <tr id="scoreSheetEditorTableRowNumber_@teeName">
            <th>@Html.LabelFor(model => labelModel.Number, htmlAttributes: new { @class = "control-label col-sm-2" })</th>
            @for (int i = 0; i < Model.Count(); i++)
            {
                <th class="allowDrag">
                    @Html.HiddenFor(item => Model[i].HoleId)
                    @Html.HiddenFor(item => Model[i].Number)
                    <div>@Html.DisplayFor(item => Model[i].Number, new { @class = "control-label col-sm-3" })</div>
                </th>
            }
        </tr>
        <tr id="scoreSheetEditorTableRowPar_@teeName">
            <td>@Html.LabelFor(model => labelModel.Par, htmlAttributes: new { @class = "control-label col-sm-2" })</td>
            @for (int i = 0; i < Model.Count(); i++)
            {
                <td>@Html.TextBoxFor(model => Model[i].Par, new { @class = "form-control col-sm-3" })</td>
            }
        </tr>
        <tr id="scoreSheetEditorTableRowHcp_@teeName">
            <td>@Html.LabelFor(model => labelModel.Hcp, htmlAttributes: new { @class = "control-label col-sm-2" })</td>
            @for (int i = 0; i < Model.Count(); i++)
            {
                <td>@Html.TextBoxFor(model => Model[i].Hcp, new { @class = "form-control col-sm-3" })</td>
            }
        </tr>
        <tr id="scoreSheetEditorTableRowDistance_@teeName">
            <td>@Html.LabelFor(model => labelModel.Distance, htmlAttributes: new { @class = "control-label col-sm-2" })</td>
            @for (int i = 0; i < Model.Count(); i++)
            {
                <td>@Html.TextBoxFor(model => Model[i].Distance, new { @class = "form-control col-sm-3" })</td>
            }
        </tr>


    </table>
</div>

<script type="text/javascript">

    $(function() {
        $('#scoreSheetEditorTable_@teeName').dragtable({dragaccept:'.allowDrag'});

        var size = @Model.Count;
        $("#btnAddHole_@teeName").click(function (evt) {
            evt.preventDefault();
            $("#scoreSheetEditorTableCoumns_@teeName").append("<col width=\"60\" />");
            $("#scoreSheetEditorTableRowNumber_@teeName").append($("<th class=\"allowDrag\"><input type=\"hidden\" value=\"\" name=\"Course.TeeBoxes[" + @teeIndex + "].Holes[" + size + "].HoleId\"><th class=\"allowDrag\"><input type=\"hidden\" value=\"\" name=\"Course.TeeBoxes[" + @teeIndex + "].Holes[" + size + "].Number\"><div>" + size + "</div></th>"))
            $("#scoreSheetEditorTableRowPar_@teeName").append($("<td><input class=\"form-control col-sm-3\" type=\"text\" value=\"\" name=\"Course.TeeBoxes[" + @teeIndex + "].Holes[" + size + "].Par\"></td>"))
            $("#scoreSheetEditorTableRowHcp_@teeName").append($("<td><input class=\"form-control col-sm-3\" type=\"text\" value=\"\" name=\"Course.TeeBoxes[" + @teeIndex + "].Holes[" + size + "].Hcp\"></td>"))
            $("#scoreSheetEditorTableRowDistance_@teeName").append($("<td><input class=\"form-control col-sm-3\" type=\"text\" value=\"\" name=\"Course.TeeBoxes[" + @teeIndex + "].Holes[" + size + "].Distance\"></td>"))
            size++;
        });
    });


</script>
